{"version":3,"sources":["../../../../../../../../../assets/scripts/GameModule/Base/Module/View/Dialog/assets/scripts/GameModule/Base/Module/View/Dialog/NetErrorDialog.js"],"names":["cc","Class","extends","Component","properties","btnClickSfx","AudioClip","_isSoundOpen","_retryCallback","_exitCallback","_listenerId","onLoad","_registerTouchEvent","initWithData","alertType","ss","GlobalConst","NET_ERROR_ALERT_TYPE","ALERT_COMMON","retryCallback","exitCallback","localStorage","isSoundOpen","userInfoCache","userId","retryBtn","uiUtil","findNodeByPathName","node","exitBtn","active","addClickEvent","ALERT_RETRY","setPositionX","getPositionX","getComponent","Button","interactable","ALERT_EXIT","_clickRetryEvent","audioUtil","playSfx","destroy","_clickExitEvent","listener","event","EventListener","TOUCH_ONE_BY_ONE","swallowTouches","onTouchBegan","touches","onTouchMoved","onTouchEnded","eventManager","addListener","onDestroy","removeListener"],"mappings":"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","file":"NetErrorDialog.js","sourceRoot":"../../../../../../../../../assets/scripts/GameModule/Base/Module/View/Dialog","sourcesContent":["/**\n */\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        btnClickSfx: cc.AudioClip,\n        _isSoundOpen : false,\n        _retryCallback: null,\n        _exitCallback: null,\n        _listenerId : -1,\n    },\n\n    onLoad: function () {\n        this._registerTouchEvent();\n    },\n\n    initWithData : function (alertType = cc.ss.GlobalConst.NET_ERROR_ALERT_TYPE.ALERT_COMMON,retryCallback = null,exitCallback = null) {\n\n        this._retryCallback = retryCallback;\n        this._exitCallback = exitCallback;\n\n        this._isSoundOpen = cc.ss.localStorage.isSoundOpen(cc.ss.userInfoCache.userId);\n\n        if(alertType === cc.ss.GlobalConst.NET_ERROR_ALERT_TYPE.ALERT_COMMON){\n\n            let retryBtn = cc.ss.uiUtil.findNodeByPathName(this.node, \"dlg/retryBtn\");\n            let exitBtn = cc.ss.uiUtil.findNodeByPathName(this.node, \"dlg/exitBtn\");\n            retryBtn.active = true;\n            exitBtn.active = true;\n            cc.ss.uiUtil.addClickEvent(retryBtn, this.node, \"NetErrorDialog\", \"_clickRetryEvent\");\n            cc.ss.uiUtil.addClickEvent(exitBtn, this.node, \"NetErrorDialog\", \"_clickExitEvent\");\n\n        }else if (alertType === cc.ss.GlobalConst.NET_ERROR_ALERT_TYPE.ALERT_RETRY){\n\n            let retryBtn = cc.ss.uiUtil.findNodeByPathName(this.node, \"dlg/retryBtn\");\n            retryBtn.active = true;\n            retryBtn.setPositionX(this.node.getPositionX());\n            cc.ss.uiUtil.addClickEvent(retryBtn, this.node, \"NetErrorDialog\", \"_clickRetryEvent\");\n            cc.ss.uiUtil.findNodeByPathName(this.node, \"dlg/exitBtn\").getComponent(cc.Button).interactable = false;\n\n        }else if(alertType === cc.ss.GlobalConst.NET_ERROR_ALERT_TYPE.ALERT_EXIT){\n\n            let exitBtn = cc.ss.uiUtil.findNodeByPathName(this.node, \"dlg/exitBtn\");\n            exitBtn.active = true;\n            exitBtn.setPositionX(this.node.getPositionX());\n            cc.ss.uiUtil.addClickEvent(exitBtn, this.node, \"NetErrorDialog\", \"_clickExitEvent\");\n            cc.ss.uiUtil.findNodeByPathName(this.node, \"dlg/retryBtn\").getComponent(cc.Button).interactable = false;\n\n        }\n\n    },\n\n    _clickRetryEvent: function () {\n\n        if(this._isSoundOpen === true) cc.ss.audioUtil.playSfx(this.btnClickSfx);\n        if(this._retryCallback !== null) this._retryCallback();\n        this.node.destroy();\n\n    },\n\n    _clickExitEvent: function () {\n\n        if(this._isSoundOpen === true) cc.ss.audioUtil.playSfx(this.btnClickSfx);\n        if(this._exitCallback !== null) this._exitCallback();\n        this.node.destroy();\n\n    },\n\n    _registerTouchEvent : function() {\n        let listener = {\n            event : cc.EventListener.TOUCH_ONE_BY_ONE,\n            swallowTouches : true,\n            onTouchBegan : function(touches, event) {\n                return true;\n            },\n            onTouchMoved : function(event) {\n\n            },\n            onTouchEnded : function(event) {\n\n            }\n        };\n        this._listenerId = cc.eventManager.addListener(listener, this.node);\n    },\n\n    onDestroy : function () {\n        cc.eventManager.removeListener(this._listenerId);\n    }\n\n\n});\n"]}