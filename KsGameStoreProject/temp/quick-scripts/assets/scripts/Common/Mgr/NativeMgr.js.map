{"version":3,"sources":["NativeMgr.js"],"names":["Android_Class_Signature","Ios_Class_Signature","module","exports","doVibrate","platform","cc","sys","OS_ANDROID","OS_IOS","console","log","funcName","jsb","reflection","callStaticMethod","backToNative","ss","audioUtil","stopAllBgm","stopAllSfx","garbageCollect","loader","releaseAll","audioEngine","uncacheAll","isInstallWechat","shareWechatFriend","imgPath","reportPointUtil","reportShareMedalEvent","GlobalConst","SHARE_APP_TYPE","TYPE_FRIENDS","shareTimeline","TYPE_TIMELINE","capturePicAndSave","TYPE_SAVEPICTURE","jumpToProductDetailPage","productInfoStr","reportJumpAppProductOrPlayerPageEvent"],"mappings":";;;;;;AAAA,IAAMA,0BAA0B,uCAAhC,EAAyE;AACzE,IAAMC,sBAAsB,qBAA5B,EAAmD;;AAEnDC,OAAOC,OAAP,GAAiB;;AAEb;AACAC,eAAY,mBAASC,QAAT,EACZ;AACI,YAAGA,aAAaC,GAAGC,GAAH,CAAOC,UAApB,IAAmCH,aAAaC,GAAGC,GAAH,CAAOE,MAA1D,EAAiE;AAC7DC,oBAAQC,GAAR,CAAY,4BAAZ;AACA;AACH;;AAED,YAAIC,WAAW,WAAf;AACA,YAAIP,aAAaC,GAAGC,GAAH,CAAOC,UAAxB,EAAmC;AAC/BK,gBAAIC,UAAJ,CAAeC,gBAAf,CAAgCf,uBAAhC,EAAyDY,QAAzD,EAAmE,KAAnE;AACH,SAFD,MAEM,IAAGP,aAAaC,GAAGC,GAAH,CAAOE,MAAvB,EAA8B;AAChCI,gBAAIC,UAAJ,CAAeC,gBAAf,CAAgCd,mBAAhC,EAAqDW,QAArD;AACH;AACJ,KAhBY;;AAmBb;;;;AAIAI,kBAAe,sBAAUX,QAAV,EAAoB;AAC/B,YAAGA,aAAaC,GAAGC,GAAH,CAAOC,UAApB,IAAmCH,aAAaC,GAAGC,GAAH,CAAOE,MAA1D,EAAiE;AAC7DC,oBAAQC,GAAR,CAAY,+BAAZ;AACA;AACH;;AAEDL,WAAGW,EAAH,CAAMC,SAAN,CAAgBC,UAAhB;AACAb,WAAGW,EAAH,CAAMC,SAAN,CAAgBE,UAAhB;AACAd,WAAGC,GAAH,CAAOc,cAAP;;AAEA,YAAIT,WAAW,cAAf;;AAEA,YAAIP,aAAaC,GAAGC,GAAH,CAAOC,UAAxB,EAAmC;AAC/BK,gBAAIC,UAAJ,CAAeC,gBAAf,CAAgCf,uBAAhC,EAAyDY,QAAzD,EAAmE,KAAnE;AACH,SAFD,MAEM,IAAGP,aAAaC,GAAGC,GAAH,CAAOE,MAAvB,EAA8B;AAChCH,eAAGgB,MAAH,CAAUC,UAAV;AACAjB,eAAGkB,WAAH,CAAeC,UAAf;AACAnB,eAAGC,GAAH,CAAOc,cAAP;AACAR,gBAAIC,UAAJ,CAAeC,gBAAf,CAAgCd,mBAAhC,EAAqDW,QAArD;AACH;AACJ,KA3CY;;AA6Cbc,qBAAkB,yBAAUrB,QAAV,EAAoB;AAClC,YAAGA,aAAaC,GAAGC,GAAH,CAAOC,UAApB,IAAmCH,aAAaC,GAAGC,GAAH,CAAOE,MAA1D,EAAiE;AAC7DC,oBAAQC,GAAR,CAAY,wCAAZ;AACA,mBAAO,IAAP;AACH;;AAED,YAAIC,WAAW,iBAAf;AACA,YAAIP,aAAaC,GAAGC,GAAH,CAAOC,UAAxB,EAAmC;AAC/B,mBAAOK,IAAIC,UAAJ,CAAeC,gBAAf,CAAgCf,uBAAhC,EAAyDY,QAAzD,EAAmE,KAAnE,CAAP;AACH,SAFD,MAEM,IAAGP,aAAaC,GAAGC,GAAH,CAAOE,MAAvB,EAA8B;AAChC,mBAAOI,IAAIC,UAAJ,CAAeC,gBAAf,CAAgCd,mBAAhC,EAAqDW,QAArD,CAAP;AACH;AACJ,KAzDY;;AA2Db;;;;;AAKAe,uBAAoB,2BAAUtB,QAAV,EAAoBuB,OAApB,EAA6B;;AAE7C,YAAGvB,aAAaC,GAAGC,GAAH,CAAOC,UAApB,IAAmCH,aAAaC,GAAGC,GAAH,CAAOE,MAA1D,EAAiE;AAC7DC,oBAAQC,GAAR,CAAY,oCAAZ;AACA;AACH;;AAED;AACAL,WAAGW,EAAH,CAAMY,eAAN,CAAsBC,qBAAtB,CAA4CxB,GAAGW,EAAH,CAAMc,WAAN,CAAkBC,cAAlB,CAAiCC,YAA7E;;AAEA,YAAIrB,WAAW,aAAf;AACA,YAAIP,aAAaC,GAAGC,GAAH,CAAOC,UAAxB,EAAmC;AAC/BK,gBAAIC,UAAJ,CAAeC,gBAAf,CAAgCf,uBAAhC,EAAyDY,QAAzD,EAAmE,uBAAnE,EAA4FgB,OAA5F;AACH,SAFD,MAEM,IAAGvB,aAAaC,GAAGC,GAAH,CAAOE,MAAvB,EAA8B;AAChCI,gBAAIC,UAAJ,CAAeC,gBAAf,CAAgCd,mBAAhC,EAAqDW,WAAW,GAAhE,EAAsEgB,OAAtE;AACH;AACJ,KAhFY;;AAkFb;;;;;AAKAM,mBAAgB,uBAAU7B,QAAV,EAAoBuB,OAApB,EAA6B;AACzC,YAAGvB,aAAaC,GAAGC,GAAH,CAAOC,UAApB,IAAmCH,aAAaC,GAAGC,GAAH,CAAOE,MAA1D,EAAiE;AAC7DC,oBAAQC,GAAR,CAAY,gCAAZ;AACA;AACH;;AAED;AACAL,WAAGW,EAAH,CAAMY,eAAN,CAAsBC,qBAAtB,CAA4CxB,GAAGW,EAAH,CAAMc,WAAN,CAAkBC,cAAlB,CAAiCG,aAA7E;;AAEA,YAAIvB,WAAW,eAAf;;AAEA,YAAIP,aAAaC,GAAGC,GAAH,CAAOC,UAAxB,EAAmC;AAC/BK,gBAAIC,UAAJ,CAAeC,gBAAf,CAAgCf,uBAAhC,EAAyDY,QAAzD,EAAmE,uBAAnE,EAA4FgB,OAA5F;AACH,SAFD,MAEM,IAAGvB,aAAaC,GAAGC,GAAH,CAAOE,MAAvB,EAA8B;AAChCI,gBAAIC,UAAJ,CAAeC,gBAAf,CAAgCd,mBAAhC,EAAqDW,WAAW,GAAhE,EAAqEgB,OAArE;AACH;AACJ,KAvGY;;AAyGb;;;;;AAKAQ,uBAAoB,2BAAU/B,QAAV,EAAoBuB,OAApB,EAA6B;AAC7C,YAAGvB,aAAaC,GAAGC,GAAH,CAAOC,UAApB,IAAmCH,aAAaC,GAAGC,GAAH,CAAOE,MAA1D,EAAiE;AAC7DC,oBAAQC,GAAR,CAAY,oCAAZ;AACA;AACH;;AAED;AACAL,WAAGW,EAAH,CAAMY,eAAN,CAAsBC,qBAAtB,CAA4CxB,GAAGW,EAAH,CAAMc,WAAN,CAAkBC,cAAlB,CAAiCK,gBAA7E;;AAEA,YAAIzB,WAAW,mBAAf;AACA,YAAIP,aAAaC,GAAGC,GAAH,CAAOC,UAAxB,EAAmC;AAC/BK,gBAAIC,UAAJ,CAAeC,gBAAf,CAAgCf,uBAAhC,EAAyDY,QAAzD,EAAmE,uBAAnE,EAA4FgB,OAA5F;AACH,SAFD,MAEM,IAAGvB,aAAaC,GAAGC,GAAH,CAAOE,MAAvB,EAA8B;AAChCI,gBAAIC,UAAJ,CAAeC,gBAAf,CAAgCd,mBAAhC,EAAqDW,WAAW,GAAhE,EAAqEgB,OAArE;AACH;AACJ,KA7HY;;AAiIb;;AAEA;;;;;AAKAU,2BAxIa,mCAwIWjC,QAxIX,EAwIqBkC,cAxIrB,EAyIb;;AAEI,YAAGlC,aAAaC,GAAGC,GAAH,CAAOC,UAApB,IAAmCH,aAAaC,GAAGC,GAAH,CAAOE,MAA1D,EAAiE;AAC7DC,oBAAQC,GAAR,CAAY,0CAAZ;AACA;AACH;;AAED;AACAL,WAAGW,EAAH,CAAMY,eAAN,CAAsBW,qCAAtB,CAA4D,KAA5D;;AAEAlC,WAAGW,EAAH,CAAMC,SAAN,CAAgBC,UAAhB;AACAb,WAAGW,EAAH,CAAMC,SAAN,CAAgBE,UAAhB;AACAd,WAAGC,GAAH,CAAOc,cAAP;;AAEA,YAAIT,WAAW,yBAAf;AACA,YAAIP,aAAaC,GAAGC,GAAH,CAAOC,UAAxB,EAAmC;AAC/BK,gBAAIC,UAAJ,CAAeC,gBAAf,CAAgCf,uBAAhC,EAAyDY,QAAzD,EAAmE,uBAAnE,EAA4F2B,cAA5F;AACH,SAFD,MAEM,IAAGlC,aAAaC,GAAGC,GAAH,CAAOE,MAAvB,EAA8B;AAChCH,eAAGgB,MAAH,CAAUC,UAAV;AACAjB,eAAGkB,WAAH,CAAeC,UAAf;AACAnB,eAAGC,GAAH,CAAOc,cAAP;AACAR,gBAAIC,UAAJ,CAAeC,gBAAf,CAAgCd,mBAAhC,EAAqDW,WAAW,GAAhE,EAAqE2B,cAArE;AACH;AACJ;AAhKY,CAAjB","file":"NativeMgr.js","sourceRoot":"../../../../../../assets/scripts/Common/Mgr","sourcesContent":["const Android_Class_Signature = \"org/cocos2dx/javascript/CocosActivity\"; //Android类完整签名\nconst Ios_Class_Signature = \"CocosViewController\"; //Ios类名-不需要路径\n\nmodule.exports = {\n\n    //石龙于2018-11-11添加震动功能\n    doVibrate : function(platform)\n    {\n        if(platform !== cc.sys.OS_ANDROID  && platform !== cc.sys.OS_IOS){\n            console.log(\"[NativeMgr]doVibrate模拟器不跳转\");\n            return;\n        }\n\n        let funcName = \"doVibrate\";\n        if (platform === cc.sys.OS_ANDROID){\n            jsb.reflection.callStaticMethod(Android_Class_Signature, funcName, \"()V\");\n        }else if(platform === cc.sys.OS_IOS){\n            jsb.reflection.callStaticMethod(Ios_Class_Signature, funcName);\n        }\n    },\n\n\n    /**\n     * 跳转到app\n     * @param platform 平台\n     */\n    backToNative : function (platform) {\n        if(platform !== cc.sys.OS_ANDROID  && platform !== cc.sys.OS_IOS){\n            console.log(\"[NativeMgr]backToNative模拟器不跳转\");\n            return;\n        }\n\n        cc.ss.audioUtil.stopAllBgm();\n        cc.ss.audioUtil.stopAllSfx();\n        cc.sys.garbageCollect();\n\n        let funcName = \"backToNative\";\n\n        if (platform === cc.sys.OS_ANDROID){\n            jsb.reflection.callStaticMethod(Android_Class_Signature, funcName, \"()V\");\n        }else if(platform === cc.sys.OS_IOS){\n            cc.loader.releaseAll();\n            cc.audioEngine.uncacheAll();\n            cc.sys.garbageCollect();\n            jsb.reflection.callStaticMethod(Ios_Class_Signature, funcName);\n        }\n    },\n\n    isInstallWechat : function (platform) {\n        if(platform !== cc.sys.OS_ANDROID  && platform !== cc.sys.OS_IOS){\n            console.log(\"[NativeMgr]isInstallWechat模拟器默认返回true \");\n            return true;\n        }\n\n        let funcName = \"isInstallWechat\";\n        if (platform === cc.sys.OS_ANDROID){\n            return jsb.reflection.callStaticMethod(Android_Class_Signature, funcName, \"()Z\");\n        }else if(platform === cc.sys.OS_IOS){\n            return jsb.reflection.callStaticMethod(Ios_Class_Signature, funcName);\n        }\n    },\n\n    /**\n     * 分享截图给微信好友\n     * @param platform 平台\n     * @param imgPath 截图本地地址\n     */\n    shareWechatFriend : function (platform, imgPath) {\n\n        if(platform !== cc.sys.OS_ANDROID  && platform !== cc.sys.OS_IOS){\n            console.log(\"[NativeMgr]shareWechatFriend模拟器不调用\");\n            return;\n        }\n\n        //打点分享\n        cc.ss.reportPointUtil.reportShareMedalEvent(cc.ss.GlobalConst.SHARE_APP_TYPE.TYPE_FRIENDS);\n\n        let funcName = \"shareWechat\";\n        if (platform === cc.sys.OS_ANDROID){\n            jsb.reflection.callStaticMethod(Android_Class_Signature, funcName, \"(Ljava/lang/String;)V\", imgPath);\n        }else if(platform === cc.sys.OS_IOS){\n            jsb.reflection.callStaticMethod(Ios_Class_Signature, funcName + \":\" , imgPath);\n        }\n    },\n\n    /**\n     * 分享截图到朋友圈\n     * @param platform  平台\n     * @param imgPath 截图本地地址\n     */\n    shareTimeline : function (platform, imgPath) {\n        if(platform !== cc.sys.OS_ANDROID  && platform !== cc.sys.OS_IOS){\n            console.log(\"[NativeMgr]shareTimeline模拟器不调用\");\n            return;\n        }\n\n        //打点分享\n        cc.ss.reportPointUtil.reportShareMedalEvent(cc.ss.GlobalConst.SHARE_APP_TYPE.TYPE_TIMELINE);\n\n        let funcName = \"shareTimeline\";\n\n        if (platform === cc.sys.OS_ANDROID){\n            jsb.reflection.callStaticMethod(Android_Class_Signature, funcName, \"(Ljava/lang/String;)V\", imgPath);\n        }else if(platform === cc.sys.OS_IOS){\n            jsb.reflection.callStaticMethod(Ios_Class_Signature, funcName + \":\", imgPath);\n        }\n    },\n\n    /**\n     * 保存截图到本地\n     * @param platform 平台\n     * @param imgPath 截图本地地址\n     */\n    capturePicAndSave : function (platform, imgPath) {\n        if(platform !== cc.sys.OS_ANDROID  && platform !== cc.sys.OS_IOS){\n            console.log(\"[NativeMgr]capturePicAndSave模拟器不调用\");\n            return;\n        }\n\n        //打点分享\n        cc.ss.reportPointUtil.reportShareMedalEvent(cc.ss.GlobalConst.SHARE_APP_TYPE.TYPE_SAVEPICTURE);\n\n        let funcName = \"capturePicAndSave\";\n        if (platform === cc.sys.OS_ANDROID){\n            jsb.reflection.callStaticMethod(Android_Class_Signature, funcName, \"(Ljava/lang/String;)V\", imgPath);\n        }else if(platform === cc.sys.OS_IOS){\n            jsb.reflection.callStaticMethod(Ios_Class_Signature, funcName + \":\", imgPath);\n        }\n    },\n\n\n\n    //app4.8添加native交互函数函数\n\n    /**\n     *\n     * @param platform\n     * @param productInfoStr\n     */\n    jumpToProductDetailPage(platform, productInfoStr)\n    {\n\n        if(platform !== cc.sys.OS_ANDROID  && platform !== cc.sys.OS_IOS){\n            console.log(\"[NativeMgr]jumpToProductDetailPage模拟器不跳转\");\n            return;\n        }\n\n        //打点未付费用户跳转到商品详情界面\n        cc.ss.reportPointUtil.reportJumpAppProductOrPlayerPageEvent(false);\n\n        cc.ss.audioUtil.stopAllBgm();\n        cc.ss.audioUtil.stopAllSfx();\n        cc.sys.garbageCollect();\n\n        let funcName = \"jumpToProductDetailPage\";\n        if (platform === cc.sys.OS_ANDROID){\n            jsb.reflection.callStaticMethod(Android_Class_Signature, funcName, \"(Ljava/lang/String;)V\", productInfoStr);\n        }else if(platform === cc.sys.OS_IOS){\n            cc.loader.releaseAll();\n            cc.audioEngine.uncacheAll();\n            cc.sys.garbageCollect();\n            jsb.reflection.callStaticMethod(Ios_Class_Signature, funcName + \":\", productInfoStr);\n        }\n    },\n\n\n};"]}