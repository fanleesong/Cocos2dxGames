{"version":3,"sources":["LocalDataStorage.js"],"names":["CryptUtil","require","LocalDataStorage","key","value","cc","sys","localStorage","setItem","undefined","Error","encodeValue","base64Encode","getItem","base64Decode","_writeToLocalWithCrypt","_readFromLocalWithCrypt","_readFromLocal","writeValue","_writeToLocal","module","exports"],"mappings":";;;;;;;;;;AAAA,IAAMA,YAAYC,QAAQ,WAAR,CAAlB;;IAEMC;;;;;;;;AAEF;;;;;sCAKcC,KAAKC,OAAO;AACtBC,eAAGC,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4BL,GAA5B,EAAiCC,KAAjC;AACH;;;+CAEsBD,KAAKC,OAC5B;AACI,gBAAIA,UAAU,IAAV,IAAkBA,UAAUK,SAAhC,EAA2C,MAAO,IAAIC,KAAJ,CAAU,4CAAV,CAAP;AAC3C,gBAAIC,cAAcX,UAAUY,YAAV,CAAuBR,KAAvB,CAAlB;AACAC,eAAGC,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4BL,GAA5B,EAAiCQ,WAAjC;AACH;;AAED;;;;;;;;uCAKeR,KAAK;;AAEhB,mBAAOE,GAAGC,GAAH,CAAOC,YAAP,CAAoBM,OAApB,CAA4BV,GAA5B,CAAP;AACH;;;gDAEuBA,KACxB;AACI,gBAAIC,QAAQC,GAAGC,GAAH,CAAOC,YAAP,CAAoBM,OAApB,CAA4BV,GAA5B,CAAZ;AACA,gBAAIC,UAAU,IAAV,IAAkBA,UAAUK,SAAhC,EAA2C,OAAO,IAAP;;AAE3C,mBAAOT,UAAUc,YAAV,CAAuBV,KAAvB,CAAP;AACH;;;kCAGSD,KAAKC,OACf;AACI,iBAAKW,sBAAL,CAA4BZ,GAA5B,EAAiCC,KAAjC;AACH;;;kCAGSD,KACV;AACI,mBAAO,KAAKa,uBAAL,CAA6Bb,GAA7B,CAAP;AACH;;;gCAEOA,KACR;AACI,gBAAIC,QAAQ,KAAKa,cAAL,CAAoBd,GAApB,CAAZ;AACA,gBAAIC,UAAU,IAAd,EAAoB,OAAO,KAAP;AACpB,mBAAOA,UAAU,MAAjB;AACH;;;gCAEOD,KAAKC,OACb;AACI,gBAAIc,aAAad,UAAU,IAAV,GAAiB,MAAjB,GAA0B,OAA3C;AACA,iBAAKe,aAAL,CAAmBhB,GAAnB,EAAwBe,UAAxB;AACH;;;;KACJ;;;AAGDE,OAAOC,OAAP,GAAiBnB,gBAAjB","file":"LocalDataStorage.js","sourceRoot":"../../../../../../assets/scripts/Common/Tool","sourcesContent":["const CryptUtil = require('CryptUtil');\n\nclass LocalDataStorage\n{\n    /**\n     *  写入数据到本地\n     * @param key\n     * @param value\n     */\n    _writeToLocal(key, value) {\n        cc.sys.localStorage.setItem(key, value);\n    }\n\n    _writeToLocalWithCrypt(key, value)\n    {\n        if (value === null || value === undefined) throw  new Error('[LocalDataStorage]value 不能为空null或undefined');\n        let encodeValue = CryptUtil.base64Encode(value);\n        cc.sys.localStorage.setItem(key, encodeValue);\n    }\n\n    /**\n     * 从本地读取数据\n     * @param key\n     * @returns {*}\n     */\n    _readFromLocal(key) {\n\n        return cc.sys.localStorage.getItem(key);\n    }\n\n    _readFromLocalWithCrypt(key)\n    {\n        let value = cc.sys.localStorage.getItem(key);\n        if (value === null || value === undefined) return null;\n\n        return CryptUtil.base64Decode(value);\n    }\n\n\n    setString(key, value)\n    {\n        this._writeToLocalWithCrypt(key, value);\n    }\n\n\n    getString(key)\n    {\n        return this._readFromLocalWithCrypt(key);\n    }\n\n    getBool(key)\n    {\n        let value = this._readFromLocal(key);\n        if (value === null) return false;\n        return value === \"true\";\n    }\n\n    setBool(key, value)\n    {\n        let writeValue = value === true ? \"true\" : \"false\";\n        this._writeToLocal(key, writeValue);\n    }\n}//end class\n\n\nmodule.exports = LocalDataStorage;\n"]}