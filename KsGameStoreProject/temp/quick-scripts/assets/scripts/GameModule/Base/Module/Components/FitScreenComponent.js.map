{"version":3,"sources":["FitScreenComponent.js"],"names":["cc","Class","extends","Component","properties","onLoad","_fitIphoneXScreen","platform","sys","os","winSize","director","getWinSize","oldBg","find","node","iphoneXBg","ratio","height","width","OS_ANDROID","OS_IOS","undefined","active","iphoneName","view","setDesignResolutionSize","ResolutionPolicy","FIXED_WIDTH","console","log","SHOW_ALL","isIphoneXsOrAllScreen"],"mappings":";;;;;;AAAA;;;;AAIAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY,EAHP;;AAKL;AACAC,YAAQ,kBAAY;AAChB,aAAKC,iBAAL;AACH,KARI;;AAUL;;;;;;;;AAQAA,uBAAmB,6BAAY;;AAE3B,YAAIC,WAAWP,GAAGQ,GAAH,CAAOC,EAAtB;AACA,YAAIC,UAAUV,GAAGW,QAAH,CAAYC,UAAZ,EAAd;AACA,YAAIC,QAAQb,GAAGc,IAAH,CAAQ,YAAR,EAAsB,KAAKC,IAA3B,CAAZ;AACA,YAAIC,YAAYhB,GAAGc,IAAH,CAAQ,mBAAR,EAA6B,KAAKC,IAAlC,CAAhB;AACA,YAAIE,QAAQP,QAAQQ,MAAR,GAAiBR,QAAQS,KAArC;AACA,YAAKZ,aAAaP,GAAGQ,GAAH,CAAOY,UAApB,IAAkCH,QAAQ,IAA3C,IACCV,aAAaP,GAAGQ,GAAH,CAAOa,MAApB,IAA8BJ,QAAQ,CADvC,IAECV,aAAaP,GAAGQ,GAAH,CAAOa,MAApB,IAA8Bd,aAAaP,GAAGQ,GAAH,CAAOY,UAAlD,IAAgEH,QAAQ,CAF7E,EAEiF;AAAC;;AAE9E,gBAAIJ,UAAUS,SAAV,IAAuBT,UAAU,IAAjC,IAAyCG,cAAcM,SAAvD,IAAoEN,cAAc,IAAtF,EAA4F;AACxFH,sBAAMU,MAAN,GAAe,KAAf;AACAP,0BAAUO,MAAV,GAAmB,IAAnB;AACH;AACD,gBAAIC,aAAa,SAAjB;AACA,gBAAIjB,aAAaP,GAAGQ,GAAH,CAAOY,UAAxB,EAAoC;AAChC,oBAAIH,UAAU,OAAO,IAArB,EAA2B;AACvBO,iCAAa,SAAb;AACH,iBAFD,MAEO,IAAIP,UAAU,OAAO,GAArB,EAA0B;AAC7BO,iCAAa,UAAb;AACH,iBAFM,MAEA,IAAIP,UAAU,OAAO,IAArB,EAA2B;AAC9BO,iCAAa,cAAb;AACH;AACJ,aARD,MAQO;AACH,oBAAIP,SAAS,IAAb,EAAmB;AACfO,iCAAa,oBAAb;AACH,iBAFD,MAEO;AACHA,iCAAa,sBAAb;AACH;AACJ;AACDxB,eAAGyB,IAAH,CAAQC,uBAAR,CAAgC,GAAhC,EAAqC,IAArC,EAA2C1B,GAAG2B,gBAAH,CAAoBC,WAA/D;AACAC,oBAAQC,GAAR,CAAY,oCAAoCN,UAAhD;AAEH,SA3BD,MA2BO;AACHxB,eAAGyB,IAAH,CAAQC,uBAAR,CAAgC,GAAhC,EAAqC,IAArC,EAA2C1B,GAAG2B,gBAAH,CAAoBI,QAA/D;AACAF,oBAAQC,GAAR,CAAY,2CAAZ;;AAEA,gBAAIjB,UAAUS,SAAV,IAAuBT,UAAU,IAAjC,IAAyCG,cAAcM,SAAvD,IAAoEN,cAAc,IAAtF,EAA4F;AACxFH,sBAAMU,MAAN,GAAe,IAAf;AACAP,0BAAUO,MAAV,GAAmB,KAAnB;AACH;AACJ;AAEJ,KA9DI;;AAgELS,2BAAuB,iCAAY;;AAE/B,YAAItB,UAAUV,GAAGW,QAAH,CAAYC,UAAZ,EAAd;AACA,YAAIK,QAAQP,QAAQQ,MAAR,GAAiBR,QAAQS,KAArC;AACA,YAAIF,QAAQ,CAAR,IAAaA,SAAS,IAA1B,EAAgC;AAC5B,mBAAO,IAAP;AACH,SAFD,MAEO;AACH,mBAAO,KAAP;AACH;AAEJ;;AA1EI,CAAT","file":"FitScreenComponent.js","sourceRoot":"../../../../../../../../assets/scripts/GameModule/Base/Module/Components","sourcesContent":["/**\n * @className FitScreenComponent\n * @classdesc 适配使用\n */\ncc.Class({\n    extends: cc.Component,\n\n    properties: {},\n\n    // use this for initialization\n    onLoad: function () {\n        this._fitIphoneXScreen();\n    },\n\n    /**\n     *\n     * iphoneX (1125x2436)\n     * iphoneXR (828X1792)\n     * iphoneXS Max (1242x2688)\n     *\n     * @private\n     */\n    _fitIphoneXScreen: function () {\n\n        let platform = cc.sys.os;\n        let winSize = cc.director.getWinSize();\n        let oldBg = cc.find(\"fitNode/bg\", this.node);\n        let iphoneXBg = cc.find(\"fitNode/iphoneXbg\", this.node);\n        let ratio = winSize.height / winSize.width;\n        if ((platform === cc.sys.OS_ANDROID && ratio > 1.97) ||\n            (platform === cc.sys.OS_IOS && ratio > 2) ||\n            (platform !== cc.sys.OS_IOS && platform !== cc.sys.OS_ANDROID && ratio > 2)) {//测试使用\n\n            if (oldBg !== undefined && oldBg !== null && iphoneXBg !== undefined && iphoneXBg !== null) {\n                oldBg.active = false;\n                iphoneXBg.active = true;\n            }\n            let iphoneName = \"iphoneX\";\n            if (platform !== cc.sys.OS_ANDROID) {\n                if (ratio === 2436 / 1125) {\n                    iphoneName = \"iphoneX\";\n                } else if (ratio === 1792 / 828) {\n                    iphoneName = \"iphoneXR\";\n                } else if (ratio === 2688 / 1242) {\n                    iphoneName = \"iphoneXS Max\";\n                }\n            } else {\n                if (ratio >= 1.97) {\n                    iphoneName = \"Android All Screen\";\n                } else {\n                    iphoneName = \"Android Other Screen\";\n                }\n            }\n            cc.view.setDesignResolutionSize(750, 2436, cc.ResolutionPolicy.FIXED_WIDTH);\n            console.log(\" [FitScreenComponent]  this is \" + iphoneName);\n\n        } else {\n            cc.view.setDesignResolutionSize(750, 1334, cc.ResolutionPolicy.SHOW_ALL);\n            console.log(\" [FitScreenComponent]  this is no iphoneX\");\n\n            if (oldBg !== undefined && oldBg !== null && iphoneXBg !== undefined && iphoneXBg !== null) {\n                oldBg.active = true;\n                iphoneXBg.active = false;\n            }\n        }\n\n    },\n\n    isIphoneXsOrAllScreen: function () {\n\n        let winSize = cc.director.getWinSize();\n        let ratio = winSize.height / winSize.width;\n        if (ratio > 2 || ratio >= 1.97) {\n            return true;\n        } else {\n            return false;\n        }\n\n    },\n\n\n});\n"]}